<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Or√ßamento PIX</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      padding: 20px;
      text-align: center;
    }
    input, textarea {
      width: 90%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #25D366;
      color: white;
      padding: 12px 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin: 5px;
    }
    button:hover {
      opacity: 0.9;
    }
    #qrcode {
      margin-top: 20px;
    }
    .copy-area {
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h2>Gerar QR Code PIX - Or√ßamento Cliente</h2>

  <input type="text" id="nome" placeholder="Nome do Cliente" value="Marco L√∫cio"><br>
  <input type="text" id="endereco" placeholder="Endere√ßo"><br>
  <textarea id="descricao" placeholder="Descri√ß√£o do Servi√ßo"></textarea><br>
  <input type="number" id="valor" placeholder="Valor do Servi√ßo (R$)" step="0.01"><br>
  <input type="text" id="chave" placeholder="Chave PIX (telefone, CPF ou e-mail)" value="04461680681"><br>
  <input type="text" id="numero" placeholder="N√∫mero WhatsApp do cliente (ex: 31999999999)"><br>

  <button onclick="gerarQRCode()">Gerar QR Code PIX</button>

  <div id="qrcode"></div>
  <div id="pixText" class="copy-area" style="display:none;"></div>
  
  <button id="copiarPix" style="display:none; background-color:#007bff;" onclick="copiarChavePix()">Copiar Chave PIX</button>
  <button id="whatsappButton" style="display:none;" onclick="enviarWhatsApp()">Enviar no WhatsApp</button>

  <script>
    function gerarQRCode() {
      const nome = document.getElementById('nome').value;
      const endereco = document.getElementById('endereco').value;
      const descricao = document.getElementById('descricao').value;
      const valor = document.getElementById('valor').value;
      const chave = document.getElementById('chave').value;
      const numero = document.getElementById('numero').value;

      const nomeRecebedor = "Marco L√∫cio";
      const banco = "Neon";

      const mensagem = `üí∞ *Or√ßamento de Servi√ßo*\nüë§ Cliente: ${nome}\nüè† Endere√ßo: ${endereco}\nüß± Servi√ßo: ${descricao}\nüíµ Valor: R$${valor}\nüîë Chave PIX: ${chave}\nüè¶ Banco: ${banco}\nüßë Recebedor: ${nomeRecebedor}`;
      const pixPayload = `PIX: ${chave}\nNome: ${nomeRecebedor}\nBanco: ${banco}\nServi√ßo: ${descricao}\nValor: R$${valor}\nEndere√ßo: ${endereco}`;

      // Gera QR Code
      const qrDiv = document.getElementById('qrcode');
      qrDiv.innerHTML = "";
      QRCode.toCanvas(pixPayload, { width: 200 }, function (err, canvas) {
        if (err) console.error(err);
        qrDiv.appendChild(canvas);
      });

      // Exibe texto Pix
      const pixTextDiv = document.getElementById('pixText');
      pixTextDiv.style.display = "block";
      pixTextDiv.textContent = pixPayload;

      // Armazena dados para envio e c√≥pia
      window.mensagemWhats = mensagem;
      window.numeroWhats = numero;
      window.chavePix = chave;

      // Mostra bot√µes
      document.getElementById('whatsappButton').style.display = "inline-block";
      document.getElementById('copiarPix').style.display = "inline-block";
    }

    function enviarWhatsApp() {
      if (!window.numeroWhats || !window.mensagemWhats) return alert("Preencha os dados e gere o QR Code primeiro.");
      const url = `https://wa.me/${window.numeroWhats}?text=${encodeURIComponent(window.mensagemWhats)}`;
      window.open(url, "_blank");
    }

    function copiarChavePix() {
      if (!window.chavePix) return alert("Gere o QR Code primeiro.");
      navigator.clipboard.writeText(window.chavePix);
      alert("‚úÖ Chave PIX copiada com sucesso!");
    }
  </script>
</body>
</html>
